{"version":3,"sources":["hoc/withAuthRedirect.js","components/Dialogs/Dialogs.jsx","components/Dialogs/DialogsConrainer.jsx"],"names":["mapStateToPropsForRedirect","state","isAuth","auth","withAuthRedirect","Component","RedirectComponent","_React$Component","Object","C_Users_arcticmonkey_Desktop_social_network_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","C_Users_arcticmonkey_Desktop_social_network_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","C_Users_arcticmonkey_Desktop_social_network_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","apply","arguments","C_Users_arcticmonkey_Desktop_social_network_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","C_Users_arcticmonkey_Desktop_social_network_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__","key","value","props","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","react_router_dom__WEBPACK_IMPORTED_MODULE_6__","to","React","connect","DialogItem","path","id","react_default","className","react_router_dom","activeClassName","name","Message","message","maxLength50","maxLengthCreator","AddMessageFormRedux","reduxForm","form","onSubmit","handleSubmit","Field","component","Textarea","validate","required","placeholder","Dialogs","dialogsPage","dialogsElements","dialogs","map","d","Dialogs_DialogItem","messagesElements","messages","m","Dialogs_Message","values","sendMessage","newMessageBody","react_router","compose","dispatch","sendMessageCreator"],"mappings":"sMAIIA,EAA6B,SAACC,GAAD,MAAY,CAC3CC,OAAQD,EAAME,KAAKD,SAGPE,EAAmB,SAACC,GAAc,IAExCC,EAFwC,SAAAC,GAAA,SAAAD,IAAA,OAAAE,OAAAC,EAAA,EAAAD,CAAAE,KAAAJ,GAAAE,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAF,GAAAO,MAAAH,KAAAI,YAAA,OAAAN,OAAAO,EAAA,EAAAP,CAAAF,EAAAC,GAAAC,OAAAQ,EAAA,EAAAR,CAAAF,EAAA,EAAAW,IAAA,SAAAC,MAAA,WAI1C,OAAKR,KAAKS,MAAMjB,OAETkB,EAAAC,EAAAC,cAACjB,EAAcK,KAAKS,OAFIC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAUC,GAAI,eAJHlB,EAAA,CAEdmB,IAAMpB,WAUtC,OAFqCqB,YAAQ1B,EAAR0B,CAAoCpB,0JCXrEqB,EAAa,SAACR,GAClB,IAAIS,EAAO,YAAcT,EAAMU,GAC/B,OACEC,EAAAT,EAAAC,cAAA,MAAIS,UAAU,iBACZD,EAAAT,EAAAC,cAACU,EAAA,EAAD,CAASD,UAAU,gBAAgBE,gBAAgB,kBAAkBT,GAAII,GAAOT,EAAMe,QAKtFC,EAAU,SAAChB,GACf,OACEW,EAAAT,EAAAC,cAAA,MAAIS,UAAU,oBAAoBZ,EAAMiB,UA8BtCC,EAAcC,YAAiB,IAoB/BC,EAAsBC,YAAU,CAACC,KAAM,wBAAjBD,CAlBL,SAACrB,GACtB,OACEW,EAAAT,EAAAC,cAAA,QAAMoB,SAAUvB,EAAMwB,cACpBb,EAAAT,EAAAC,cAAA,WACEQ,EAAAT,EAAAC,cAACsB,EAAA,EAAD,CACEC,UAAWC,IACXC,SAAU,CAACC,IAAUX,GACrBH,KAAK,iBACLe,YAAY,wBAGhBnB,EAAAT,EAAAC,cAAA,WACEQ,EAAAT,EAAAC,cAAA,0BAQO4B,EAhDC,SAAC/B,GAEf,IAAIlB,EAAQkB,EAAMgC,YAEdC,EAAkBnD,EAAMoD,QAAQC,IAAK,SAAAC,GAAC,OAAIzB,EAAAT,EAAAC,cAACkC,EAAD,CAAYtB,KAAMqB,EAAErB,KAAMjB,IAAKsC,EAAE1B,GAAIA,GAAI0B,EAAE1B,OACrF4B,EAAmBxD,EAAMyD,SAASJ,IAAM,SAAAK,GAAC,OAAI7B,EAAAT,EAAAC,cAACsC,EAAD,CAASxB,QAASuB,EAAEvB,QAASnB,IAAK0C,EAAE9B,OAMrF,OAAKV,EAAMjB,OAGP4B,EAAAT,EAAAC,cAAA,WAASS,UAAU,WACjBD,EAAAT,EAAAC,cAAA,MAAIS,UAAU,uBACVqB,GAEJtB,EAAAT,EAAAC,cAAA,MAAIS,UAAU,0BACZD,EAAAT,EAAAC,cAAA,WAAOmC,GACP3B,EAAAT,EAAAC,cAACiB,EAAD,CAAqBG,SAbT,SAACmB,GACnB1C,EAAM2C,YAAYD,EAAOE,qBAGDjC,EAAAT,EAAAC,cAAC0C,EAAA,EAAD,CAAUxC,GAAI,qCCb3ByC,sBACXvC,YAfoB,SAACzB,GACvB,MAAO,CACLkD,YAAalD,EAAMkD,cAII,SAACe,GAC1B,MAAO,CACLJ,YAAa,SAACC,GACZG,EAASC,YAAmBJ,QAO9B3D,IAFW6D,CAGbf","file":"static/js/5.5c0d5c1a.chunk.js","sourcesContent":["import React from 'react';\r\nimport {Redirect} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\nlet mapStateToPropsForRedirect = (state) => ({\r\n  isAuth: state.auth.isAuth\r\n});\r\n\r\nexport  const withAuthRedirect = (Component) => {\r\n\r\n  class RedirectComponent extends React.Component {\r\n    render() {\r\n      if (!this.props.isAuth) return <Redirect to={'/login'} />\r\n\r\n      return <Component {...this.props} />\r\n    }\r\n  }\r\n\r\n  let ConnectedAuthRedirectComponent = connect(mapStateToPropsForRedirect)(RedirectComponent);\r\n\r\n  return ConnectedAuthRedirectComponent;\r\n}","import React from 'react';\r\nimport './Dialogs.css';\r\nimport {NavLink, Redirect} from 'react-router-dom';\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {Textarea} from \"../common/FormsControls/FormsControls\";\r\nimport {required, maxLengthCreator} from '../../utils/validators/validators.js';\r\n\r\nconst DialogItem = (props) => {\r\n  let path = \"/dialogs/\" + props.id;\r\n  return (\r\n    <li className=\"dialogs__name\">\r\n      <NavLink className=\"dialogs__link\" activeClassName=\"dialogs__active\" to={path}>{props.name}</NavLink>\r\n    </li>\r\n  )\r\n}\r\n\r\nconst Message = (props) => {\r\n  return (\r\n    <li className=\"dialogs__message\">{props.message}</li>\r\n  )\r\n}\r\n\r\nconst Dialogs = (props) => {\r\n\r\n  let state = props.dialogsPage;\r\n\r\n  let dialogsElements = state.dialogs.map( d => <DialogItem name={d.name} key={d.id} id={d.id} /> );\r\n  let messagesElements = state.messages.map ( m => <Message message={m.message} key={m.id} /> );\r\n\r\n  let addNewMessage = (values) => {\r\n    props.sendMessage(values.newMessageBody);\r\n  }\r\n\r\n  if (!props.isAuth) return <Redirect to={'/login'} />;\r\n\r\n  return (\r\n      <section className=\"dialogs\">\r\n        <ul className=\"dialogs__names-list\">\r\n          { dialogsElements }\r\n        </ul>\r\n        <ul className=\"dialogs__messages-list\">\r\n          <div>{ messagesElements }</div>\r\n          <AddMessageFormRedux onSubmit={addNewMessage} />\r\n        </ul>\r\n      </section>\r\n    )\r\n}\r\n\r\nconst maxLength50 = maxLengthCreator(50);\r\n\r\nconst AddMessageForm = (props) => {\r\n  return (\r\n    <form onSubmit={props.handleSubmit}>\r\n      <div>\r\n        <Field\r\n          component={Textarea}\r\n          validate={[required, maxLength50]}\r\n          name='newMessageBody'\r\n          placeholder='Enter your message'\r\n        />\r\n      </div>\r\n      <div>\r\n        <button>Send</button>\r\n      </div>\r\n    </form>\r\n  )\r\n}\r\n\r\nconst AddMessageFormRedux = reduxForm({form: 'dialogAddMessageForm'})(AddMessageForm);\r\n\r\nexport default Dialogs;\r\n","import {connect} from 'react-redux';\r\nimport Dialogs from './Dialogs.jsx'\r\nimport {sendMessageCreator} from '../../redux/dialogs-reducer.js';\r\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect.js\";\r\nimport {compose} from \"redux\";\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    dialogsPage: state.dialogsPage\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    sendMessage: (newMessageBody) => {\r\n      dispatch(sendMessageCreator(newMessageBody));\r\n    }\r\n  }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, mapDispatchToProps),\r\n    withAuthRedirect\r\n)(Dialogs);\r\n"],"sourceRoot":""}